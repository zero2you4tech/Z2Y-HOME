<!DOCTYPE html>
<html>
<head>
    <title>授权成功</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			background-color: #f0f0f0;
			margin: 0;
			padding: 0;
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
		}

		.container {
			text-align: center;
			padding: 20px;
			background-color: #fff;
			border-radius: 5px;
			box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.1);
		}

		h1 {
			color: #333;
		}
	</style>
    <script type="text/javascript">
        // 获取 URL 参数
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
		// 打开新的页面
        window.open(`wpm_redirect://oauth-callback?code=${code}`);
    </script>
</head>
<body>
	<div class="container">
		<h1 id="message"></h1>
	</div>
	<script>
		document.getElementById('message').textContent = 'Success！';
	</script>
	<script type="text/javascript">
		// 获取 URL 参数
		const urlParams = new URLSearchParams(window.location.search);
		// 创建一个新的 URL
		var newURL = 'wpm_redirect://oauth-callback?';
		// 遍历所有的键值对
		for (let [key, value] of urlParams.entries()) {
		    // 将键值对添加到新的 URL 后面
		    newURL += `${key}=${value}&`;
		}
		// 移除最后的 "&"
		newURL = newURL.slice(0, -1);
		// 打开新的页面
		window.open(newURL);
	</script>
</body>
</html>